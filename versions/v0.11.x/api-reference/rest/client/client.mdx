---
title: "Service Configuration"
mode: "wide"
---

The CyborgDB REST API service is configured through environment variables rather than a client constructor. The service handles database connections, storage locations, and performance settings at startup.

## Configuration

The service is configured using environment variables that define storage locations, database connections, and performance parameters.

### Required Environment Variables

| Variable | Type | Description |
|----------|------|-------------|
| `CYBORGDB_API_KEY` | `string` | Your CyborgDB API key for authentication |
| `CYBORGDB_DB_TYPE` | `string` | Database backend type (`postgres` or `redis`) |
| `CYBORGDB_CONNECTION_STRING` | `string` | Database connection string |

### Optional Environment Variables

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `PORT` | `integer` | `8000` | Port for the HTTP service |
| `SSL_CERT_PATH` | `string` | `None` | Path to SSL certificate file (enables HTTPS) |
| `SSL_KEY_PATH` | `string` | `None` | Path to SSL private key file (enables HTTPS) |
| `CYBORGDB_VERSION` | `string` | `None` | Service version identifier |
| `CPU_THREADS` | `integer` | `0` | Number of CPU threads (0 = all cores) |
| `GPU_ACCELERATE` | `boolean` | `false` | Enable GPU acceleration |

### Advanced Configuration

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `INDEX_LOCATION` | `string` | `CYBORGDB_DB_TYPE` | Override index storage location |
| `CONFIG_LOCATION` | `string` | `CYBORGDB_DB_TYPE` | Override config storage location |
| `ITEMS_LOCATION` | `string` | `CYBORGDB_DB_TYPE` | Override items storage location |
| `INDEX_CONNECTION_STRING` | `string` | `CYBORGDB_CONNECTION_STRING` | Override index database connection |
| `CONFIG_CONNECTION_STRING` | `string` | `CYBORGDB_CONNECTION_STRING` | Override config database connection |
| `ITEMS_CONNECTION_STRING` | `string` | `CYBORGDB_CONNECTION_STRING` | Override items database connection |

## Database Configuration

### PostgreSQL Configuration

```bash
export CYBORGDB_DB_TYPE=postgres
export CYBORGDB_CONNECTION_STRING="host=localhost port=5432 dbname=cyborgdb user=cyborgdb password=secure_password"
```

**Connection String Format:**
```
host=hostname port=5432 dbname=database user=username password=password
```

### Redis Configuration

```bash
export CYBORGDB_DB_TYPE=redis
export CYBORGDB_CONNECTION_STRING="host=localhost,port=6379,db=0"
```

**Connection String Format:**
```
host=hostname,port=6379,db=0
```

## Service Initialization Examples

### Basic Configuration

```bash
# Set required variables
export CYBORGDB_API_KEY=cyborg_your_api_key_here
export CYBORGDB_DB_TYPE=postgres
export CYBORGDB_CONNECTION_STRING="host=localhost port=5432 dbname=cyborgdb user=cyborgdb password=secure_password"

# Start service
cyborgdb-service
```

### Production Configuration

```bash
# Production settings with HTTPS and performance tuning
export CYBORGDB_API_KEY=cyborg_your_production_api_key
export CYBORGDB_DB_TYPE=postgres
export CYBORGDB_CONNECTION_STRING="host=prod-db.company.com port=5432 dbname=cyborgdb user=cyborgdb password=secure_password"
export PORT=8000
export SSL_CERT_PATH=/etc/ssl/certs/cyborgdb.crt
export SSL_KEY_PATH=/etc/ssl/private/cyborgdb.key
export CPU_THREADS=8
export GPU_ACCELERATE=true

# Start service
cyborgdb-service
```

### Multi-Database Configuration

```bash
# Use different databases for different storage types
export CYBORGDB_API_KEY=cyborg_your_api_key_here
export CYBORGDB_DB_TYPE=postgres

# Index data in Redis for speed
export INDEX_LOCATION=redis
export INDEX_CONNECTION_STRING="host=redis-cluster.company.com,port=6379,db=0"

# Config in PostgreSQL for reliability
export CONFIG_LOCATION=postgres
export CONFIG_CONNECTION_STRING="host=config-db.company.com port=5432 dbname=cyborgdb_config user=cyborgdb password=secure_password"

# Items in PostgreSQL for durability
export ITEMS_LOCATION=postgres
export ITEMS_CONNECTION_STRING="host=items-db.company.com port=5432 dbname=cyborgdb_items user=cyborgdb password=secure_password"

# Start service
cyborgdb-service
```

## Docker Configuration

### Basic Docker

```bash
sudo docker run -it -p 8000:8000 \
  -e CYBORGDB_API_KEY=cyborg_your_api_key_here \
  -e CYBORGDB_DB_TYPE=postgres \
  -e CYBORGDB_CONNECTION_STRING="host=host.docker.internal port=5432 dbname=postgres user=postgres password=your_password" \
  cyborginc/cyborgdb-service:latest
```

### Docker with Performance Tuning

```bash
sudo docker run -it -p 8000:8000 \
  -e CYBORGDB_API_KEY=cyborg_your_api_key_here \
  -e CYBORGDB_DB_TYPE=postgres \
  -e CYBORGDB_CONNECTION_STRING="host=host.docker.internal port=5432 dbname=postgres user=postgres password=your_password" \
  -e CPU_THREADS=4 \
  -e GPU_ACCELERATE=false \
  --cpus="4.0" \
  --memory="8g" \
  cyborginc/cyborgdb-service:latest
```

## Configuration Validation

The service validates configuration at startup and will report errors for:

- **Missing required variables**: `CYBORGDB_API_KEY`, `CYBORGDB_DB_TYPE`, `CYBORGDB_CONNECTION_STRING`
- **Invalid database types**: Only `postgres` and `redis` are supported
- **Connection failures**: Unable to connect to specified databases
- **SSL configuration errors**: Certificate files not found when SSL paths provided
- **GPU availability**: GPU acceleration requested but not available

## Configuration Examples

### Development Setup

```bash
# .env file for development
CYBORGDB_API_KEY=cyborg_dev_key_12345
CYBORGDB_DB_TYPE=postgres
CYBORGDB_CONNECTION_STRING=host=localhost port=5432 dbname=cyborgdb_dev user=dev password=devpass
PORT=8000
CPU_THREADS=2
```

### High-Performance Setup

```bash
# .env file for high-performance deployment
CYBORGDB_API_KEY=cyborg_prod_key_secure
CYBORGDB_DB_TYPE=redis
CYBORGDB_CONNECTION_STRING=host=redis-cluster,port=6379,db=0
PORT=8000
SSL_CERT_PATH=/etc/ssl/certs/cyborgdb.crt
SSL_KEY_PATH=/etc/ssl/private/cyborgdb.key
CPU_THREADS=16
GPU_ACCELERATE=true
```

### Managed Database Setup

```bash
# Using cloud managed databases
export CYBORGDB_API_KEY=cyborg_cloud_key
export CYBORGDB_DB_TYPE=postgres
export CYBORGDB_CONNECTION_STRING="host=cyborgdb.cluster-xyz.us-east-1.rds.amazonaws.com port=5432 dbname=cyborgdb user=cyborgadmin password=secure_cloud_password sslmode=require"
export PORT=8000
export SSL_CERT_PATH=/etc/letsencrypt/live/api.mycompany.com/fullchain.pem
export SSL_KEY_PATH=/etc/letsencrypt/live/api.mycompany.com/privkey.pem
```

## Error Handling

### Startup Validation

The service performs comprehensive validation at startup:

1. **Environment validation**: Checks all required variables are set
2. **Database connectivity**: Verifies connection to configured databases  
3. **SSL certificate validation**: Confirms certificate files exist and are readable
4. **Resource availability**: Validates GPU availability if requested
5. **Port availability**: Ensures the specified port can be bound

### Common Configuration Errors

- `Missing required environment variable: CYBORGDB_API_KEY`
- `Invalid database type: mysql (supported: postgres, redis)`
- `Failed to connect to database: connection refused`
- `SSL certificate file not found: /path/to/cert.pem`
- `GPU acceleration requested but CUDA not available`

## Service Health

After successful initialization, verify the service is running:

```bash
# Check service health
curl http://localhost:8000/v1/health

# Expected response
{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:00Z"
}
```