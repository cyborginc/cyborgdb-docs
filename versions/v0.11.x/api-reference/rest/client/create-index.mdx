---
title: "Create Index"
mode: "wide"
---

Create a new encrypted index with the specified configuration.

**`POST /v1/indexes/create`**

## Request Body

```json
{
  "index_name": "my_index",
  "index_key": "64_character_hex_string_representing_32_bytes",
  "index_config": {
    "type": "ivfflat",
    "dimension": 384,
    "n_lists": 1024,
    "metric": "euclidean"
  },
  "embedding_model": "all-MiniLM-L6-v2"
}
```

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `index_name` | `string` | ✅ | Unique name for the index |
| `index_key` | `string` | ✅ | 32-byte encryption key as hex string |
| `index_config` | `object` | ✅ | Index configuration (see [Index Types](#index-types)) |
| `embedding_model` | `string` | ❌ | Sentence-transformers model for auto-generation |

## Index Types

### IVFFlat (Recommended)

Suitable for applications requiring high recall with moderate memory usage:

```json
{
  "type": "ivfflat",
  "dimension": 384,
  "n_lists": 1024,
  "metric": "euclidean"
}
```

**Speed:** Fast | **Recall:** Highest | **Index Size:** Biggest

### IVF

Ideal for large-scale datasets where fast retrieval is prioritized:

```json
{
  "type": "ivf",
  "dimension": 384,
  "n_lists": 1024,
  "metric": "euclidean"
}
```

**Speed:** Fastest | **Recall:** Lowest | **Index Size:** Smallest

### IVFPQ

Product Quantization compresses embeddings, balancing memory use and recall:

```json
{
  "type": "ivfpq",
  "dimension": 384,
  "n_lists": 1024,
  "pq_dim": 64,
  "pq_bits": 8,
  "metric": "euclidean"
}
```

**Speed:** Fast | **Recall:** High | **Index Size:** Medium

## Distance Metrics

- `"euclidean"`: Euclidean distance
- `"cosine"`: Cosine similarity  
- `"squared_euclidean"`: Squared Euclidean distance

## Response

```json
{
  "status": "success",
  "message": "Index 'my_index' created successfully"
}
```

## Exceptions

- `401`: Authentication failed (invalid API key)
- `409`: Index name already exists
- `422`: Invalid request parameters
- `500`: Internal server error

## Example Usage

```bash
curl -X POST "http://localhost:8000/v1/indexes/create" \
     -H "X-API-Key: cyborg_your_api_key_here" \
     -H "Content-Type: application/json" \
     -d '{
       "index_name": "my_index",
       "index_key": "your_64_character_hex_key_here",
       "index_config": {
         "type": "ivfflat",
         "dimension": 384,
         "n_lists": 1024,
         "metric": "euclidean"
       }
     }'
```

## With Auto-Embedding

```bash
curl -X POST "http://localhost:8000/v1/indexes/create" \
     -H "X-API-Key: cyborg_your_api_key_here" \
     -H "Content-Type: application/json" \
     -d '{
       "index_name": "semantic_search_index",
       "index_key": "your_64_character_hex_key_here",
       "index_config": {
         "type": "ivfflat",
         "n_lists": 1024,
         "metric": "cosine"
       },
       "embedding_model": "all-MiniLM-L6-v2"
     }'
```

<Note>When `embedding_model` is specified, the `dimension` parameter in `index_config` is optional as it will be inferred from the embedding model.</Note>